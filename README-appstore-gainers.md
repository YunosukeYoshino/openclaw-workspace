# App Store Top Gainers アナライザー

月一回、急増したアプリの悪いレビューを分析し、改善のヒントを見つけるツール。

## 🎯 コンセプト

「勝ち組アプリ」の弱点を分析して、より良いアプリを作る

1. 過去30日間で急増したアプリを特定
2. 星1〜2の悪いレビューを徹底的に分析
3. ユーザーの核心的な不満を抽出
4. その「勝ち組アプリ」より8割優れたバージョンのヒントを得る

## 🚀 特徴

- 🔄 **月一回実行** - 月一回実行して急増アプリをチェック
- 📊 **レビュー分析** - 星1〜2の悪いレビューを徹底的に分析
- 🎯 **テーマ抽出** - 不満をテーマ別に分類
- 💡 **改善ヒント** - 具体的な改善アクションを提案
- 📄 **レポート出力** - Markdown形式で保存
- 📝 **手動入力モード** - App Store APIが不安定な場合に使用

## 📁 ファイル一覧

| ファイル | 説明 |
|---------|------|
| `appstore-top-gainers.py` | メインスクリプト |
| `test_appstore_analyzer.py` | テストスクリプト |
| `data/appstore_gainers.db` | SQLite データベース |

## ⚙️ 使い方

### テストモード（推奨）

```bash
# テストモード（ダミーデータで分析）
python3 appstore-top-gainers.py --test
```

### 手動入力モード（推奨）

App Store APIが不安定な場合、手動でレビューを入力します:

```bash
# 手動入力モード
python3 appstore-top-gainers.py --manual
```

入力フォーマット:
```
星数|タイトル|テキスト
例: 1|使いにくい|UIが複雑すぎて使いにくい
```

### iTunes API（非推奨 - 不安定）

```bash
# 検索して分析（iTunes API経由）
python3 appstore-top-gainers.py --search "camera"

# App Store IDを直接指定
python3 appstore-top-gainers.py --app-id 414681426
```

**注意**: iTunes RSS APIは現在不安定でタイムアウトが発生します。手動入力モードの使用を推奨します。

### 一覧表示

```bash
# 最近分析したアプリを一覧
python3 appstore-top-gainers.py --list
```

### 出力ファイル

- `appstore_analysis_YYYYMMDD_HHMM.md` - 分析レポート

## 📊 レポート内容

```
================================================================================
📱 App Store Top Gainers 分析レポート
📅 2026-02-15 15:30:00
================================================================================

📱 アプリ情報
----------------------------------------
名前: Camera+
開発者: LateNiteSoft
カテゴリ: Photo & Video
評価: ⭐4.5 (100,000件)
価格: $4.99
URL: https://apps.apple.com/us/app/camera/id414681426

📊 悪いレビュー統計
----------------------------------------
星1〜2のレビュー数: 45
  星1: 30件 ██████████
  星2: 15件 ██████

🎯 不満テーマ分析
----------------------------------------
  UI/UX: 28回 ███████████████████
  機能不足: 18回 ███████████
  速度/パフォーマンス: 12回 ███████

😤 上位の不満（繰り返されている）
----------------------------------------

1. (5回) UIが複雑すぎて使いにくい。ボタンが多く...
   (完全なテキストで詳細確認)

💬 悪いレビュー詳細（星1〜2）
----------------------------------------

1. ⭐ ワースト
   ユーザー: user123
   バージョン: 3.2.1
   日付: 2026-01-15T12:00:00Z
   テキスト: UIが複雑すぎて使いにくい...

🤖 AI分析用プロンプト入力
----------------------------------------
以下の悪いレビューをAIに分析させる:
---
星1: UIが複雑すぎて使いにくい...
星2: 機能が足りない...
---

💡 おすすめアクション
----------------------------------------
1. 最優先: UI/UXを改善
2. UIをシンプルにする
3. 強制的な会員登録を削除する（ある場合）
4. パフォーマンスを改善する
5. 欠けている機能を追加する
```

## 🎨 不満テーマ

自動検出されるテーマ:

- **機能不足** - 欠けている機能、追加してほしいもの
- **UI/UX** - 複雑さ、使いにくさ、デザイン
- **バグ/動作** - クラッシュ、動かない
- **会員登録/広告** - 強制的な課金、広告
- **速度/パフォーマンス** - 重い、遅い
- **通知** - スパム通知
- **同期/バックアップ** - データ消失、同期エラー
- **カスタマイズ** - テーマ、個人設定
- **オフライン** - インターネット接続必須

## ⚙️ Cron設定（月一回）

```bash
# crontabを開く
crontab -e

# 毎月1日3時に実行
0 3 1 * * cd /home/node/.openclaw/workspace && python3 appstore-top-gainers.py --search "photo editor" >> cron-appstore.log 2>&1
```

**注意**: 実際の「Top Gainers」データは AppStoreTracker API 等のサードパーティサービスが必要です。上記の設定はデモ用です。

## 🔧 トラブルシューティング

### レビューが取得できない場合

- App Store RSS APIの制限を確認
- 数秒待ってから再試行

### 分析結果が弱い場合

- レビュー数を増やす（`limit` パラメータ）
- 複数カテゴリのレビューを取得

## 📈 今後の改善

- [ ] AppStoreTracker API 連携
- [ ] 自動で急増アプリを検出
- [ ] AIによる詳細分析（Claude/ChatGPT API）
- [ ] 競合アプリ比較
- [ ] トレンド追跡

## 📄 ライセンス

MIT
